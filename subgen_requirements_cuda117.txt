# SubGenerator v3.3 - Requirements для CUDA 11.7 + GTX 1080Ti
# Оптимизировано для GeForce GTX 1080Ti (Pascal, Compute Capability 6.1)
# Максимальная поддерживаемая версия CUDA: 11.8

# =============================================================================
# ОСНОВНЫЕ ЗАВИСИМОСТИ - CUDA 11.7 STACK
# =============================================================================

# PyTorch с CUDA 11.7 (стабильная версия для Pascal)
--index-url https://download.pytorch.org/whl/cu117
--extra-index-url https://pypi.org/simple/
torch==1.13.1+cu117
torchaudio==0.13.1+cu117
torchvision==0.14.1+cu117

# faster-whisper 0.9.0 - ОБЯЗАТЕЛЬНАЯ ВЕРСИЯ
faster-whisper==0.9.0

# =============================================================================
# ЗАВИСИМОСТИ faster-whisper 0.9.0
# =============================================================================

# Tokenizers (совместимая с faster-whisper 0.9.0)
tokenizers>=0.13.0,<0.15.0

# Transformers (совместимая версия)
transformers>=4.21.0,<4.35.0

# Hugging Face Hub
huggingface-hub>=0.13.0,<0.18.0

# =============================================================================
# АУДИО ОБРАБОТКА
# =============================================================================

# Librosa для аудио обработки (совместимая с older NumPy)
librosa>=0.9.0,<0.11.0

# SoundFile для чтения аудио файлов
soundfile>=0.12.0,<0.13.0

# NumPy (совместимая с PyTorch 1.13.1)
numpy>=1.21.0,<1.25.0

# SciPy для научных вычислений
scipy>=1.7.0,<1.12.0

# =============================================================================
# СИСТЕМНЫЕ ЗАВИСИМОСТИ
# =============================================================================

# FFmpeg wrapper для обработки видео/аудио
ffmpeg-python>=0.2.0

# Requests для загрузки моделей
requests>=2.25.0

# Typing extensions для backward compatibility
typing-extensions>=4.0.0

# =============================================================================
# ОПЦИОНАЛЬНЫЕ ЗАВИСИМОСТИ (для улучшения производительности)
# =============================================================================

# Accelerate для оптимизации GPU (опционально)
# accelerate>=0.20.0,<0.25.0

# Intel MKL для CPU оптимизации (если нужно)
# mkl>=2021.0

# =============================================================================
# УСТАНОВКА ИНСТРУКЦИЙ
# =============================================================================

# 1. Создать виртуальное окружение:
# python -m venv venv_subgen
# source venv_subgen/bin/activate  # Linux/Mac
# venv_subgen\Scripts\activate     # Windows

# 2. Обновить pip:
# python -m pip install --upgrade pip

# 3. Установить зависимости:
# pip install -r requirements_cuda117.txt

# 4. Проверить установку:
# python -c "import torch; print(f'PyTorch: {torch.__version__}'); print(f'CUDA: {torch.cuda.is_available()}')"
# python -c "import faster_whisper; print('faster-whisper OK')"

# =============================================================================
# TROUBLESHOOTING GTX 1080Ti + CUDA 11.7
# =============================================================================

# Если возникают проблемы с CUDA:
# 1. Убедитесь что установлен NVIDIA Driver >= 470.57.02
# 2. Установите CUDA Toolkit 11.7 с официального сайта NVIDIA
# 3. Проверьте переменные окружения:
#    - CUDA_HOME должна указывать на папку CUDA 11.7
#    - PATH должен включать CUDA 11.7/bin

# Если faster-whisper не работает:
# 1. Попробуйте переустановить: pip uninstall faster-whisper && pip install faster-whisper==0.9.0
# 2. Проверьте что CuDNN совместим с CUDA 11.7
# 3. Убедитесь что нет конфликтующих версий в системе

# Альтернативные индексы для PyTorch (если основной недоступен):
# --index-url https://download.pytorch.org/whl/cu117
# --extra-index-url https://pypi.org/simple/

# =============================================================================
# ВЕРСИИ ДЛЯ ПРОВЕРКИ СОВМЕСТИМОСТИ
# =============================================================================

# Проверенные версии для GTX 1080Ti:
# - CUDA: 11.7 или 11.8 (максимум для Pascal)
# - cuDNN: 8.5.0 (совместимая с CUDA 11.7)
# - NVIDIA Driver: 470.57.02+ (поддержка CUDA 11.7)
# - Python: 3.8, 3.9, 3.10 (3.9 рекомендуется)

# Память:
# - System RAM: минимум 8GB, рекомендуется 16GB+
# - GPU VRAM: GTX 1080Ti имеет 11GB (достаточно для base/small моделей)

# =============================================================================
# БЭКАП ПЛАН (если CUDA не работает)
# =============================================================================

# CPU-only версия (медленно, но работает везде):
# torch==1.13.1+cpu
# torcha
